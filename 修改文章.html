<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
		<title>新增文档 - 光年(Light Year Admin)后台管理系统模板</title>
		<link rel="icon" href="favicon.ico" type="image/ico">
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<link href="css/materialdesignicons.min.css" rel="stylesheet">
		<!--标签插件-->
		<link rel="stylesheet" href="js/jquery-tags-input/jquery.tagsinput.min.css">
		<link href="css/style.min.css" rel="stylesheet">
		<style type="text/css">
			#editor-wrapper {
				z-index: 100;
				border: 1px solid #0FB25F;
			}
		</style>
	</head>

	<body>
		<div class="lyear-layout-web">
			<div class="lyear-layout-container">
				<!--左侧导航-->
				<aside class="lyear-layout-sidebar">

					<!-- logo -->
					<div id="logo" class="sidebar-header">
						<a href="index.html"><img src="images/logo-sidebar.png" title="LightYear" alt="LightYear" /></a>
					</div>
					<div class="lyear-layout-sidebar-scroll">

						<nav class="sidebar-main">
							<ul class="nav nav-drawer">
								<li class="nav-item active"> <a href="index.html"><i class="mdi mdi-home"></i> 后台首页</a>
								</li>
								<li class="nav-item"> <a href="写文章.html"><i class="mdi mdi-feather"></i>添加文章</a>
								</li>
								</li>
								<li class="nav-item"> <a href="写日志.html"><i
											class="mdi mdi-eyedropper-variant"></i>添加网站日志</a>
								</li>
								<li class="nav-item"> <a href="写友链.html"><i class="mdi mdi-marker"></i>添加友链</a>
								</li>

								<li class="nav-item"> <a href="用户.html"><i class="mdi mdi-account "></i>用户</a>
								</li>
								<li class="nav-item"> <a href="留言.html"><i
											class="mdi mdi-comment-text-outline"></i>留言</a>
								</li>
								<li class="nav-item"> <a href="友链.html"><i
											class="mdi mdi-account-multiple-plus"></i>友链</a>
								</li>
								<li class="nav-item"> <a href="网站历程.html"><i
											class="mdi mdi-mushroom-outline"></i>网站历程</a>
								</li>


							</ul>
						</nav>

						<div class="sidebar-footer">
							<p class="copyright">Copyright &copy; 2019. <a target="_blank"
									href="http://lyear.itshubao.com">IT书包</a> All rights reserved.</p>
						</div>
					</div>

				</aside>
				<!--End 左侧导航-->

				<!--头部信息-->
				<header class="lyear-layout-header">

					<nav class="navbar navbar-default">
						<div class="topbar">

							<div class="topbar-left">
								<div class="lyear-aside-toggler">
									<span class="lyear-toggler-bar"></span>
									<span class="lyear-toggler-bar"></span>
									<span class="lyear-toggler-bar"></span>
								</div>
								<span class="navbar-page-title"> 示例页面 - 新增文档 </span>
							</div>

							<ul class="topbar-right">
								<li class="dropdown dropdown-profile">
									<a href="javascript:void(0)" data-toggle="dropdown">
										<img class="img-avatar img-avatar-48 m-r-10" src="images/users/avatar.jpg"
											alt="笔下光年" />
										<span>笔下光年 <span class="caret"></span></span>
									</a>
									<ul class="dropdown-menu dropdown-menu-right">
										<li> <a href="lyear_pages_profile.html"><i class="mdi mdi-account"></i> 个人信息</a>
										</li>
										<li> <a href="修改密码.html"><i class="mdi mdi-lock-outline"></i>
												修改密码</a> </li>
										<li> <a href="javascript:void(0)"><i class="mdi mdi-delete"></i> 清空缓存</a></li>
										<li class="divider"></li>
										<li> <a href="lyear_pages_login.html"><i class="mdi mdi-logout-variant"></i>
												退出登录</a> </li>
									</ul>
								</li>
							</ul>

						</div>
					</nav>

				</header>
				<!--End 头部信息-->

				<!--页面主要内容-->
				<main class="lyear-layout-content">

					<div class="container-fluid">

						<div class="row">
							<div class="col-lg-12">
								<div class="card">
									<div class="card-body">

										<form action="#!" method="post" class="row">
											<div class="form-group col-md-12">
												<label for="title">标题</label>
												<input type="text" name="title" id="title" class="form-control" value=""
													maxlength="15" placeholder="博客标题（不可修改）" disabled="">
											</div>
											<div class="form-group col-md-12">
												<label for="createBy">作者</label>
												<input type="text" name="createBy" class="form-control" id="createBy"
													value="吴哒哒" maxlength="10" placeholder="作者(不可修改)">
											</div>

											<div class="form-group col-md-12">
												<label for="summary">博客描述</label>
												<textarea id="summary" class="form-control" name="summary"
													maxlength="200" value="" placeholder="博客描述..." rows="5"
													style="resize: none"></textarea>
											</div>
											<div class="form-group col-md-12">
												<label for="headImage">文章头图片</label>
												<div class="form-controls">
													<ul class="list-inline clearfix lyear-uploads-pic">
														<li class="col-xs-4 col-sm-3 col-md-2">
															<img src="images/gallery/17.jpg" alt="图片1" id="image">
														</li>
														<li class="col-xs-4 col-sm-3 col-md-2">
															<a class="pic-add" id="add-pic-btn" title="点击上传"
																onclick="addImage()"></a>
															<input type="file" name="headImage" id="headImage"
																onchange="addHeadImage(this)" style="display: none;">
														</li>
													</ul>
												</div>
											</div>
											<div class="form-group col-md-12">
												<label for="type">类型</label>
												<div class="form-controls">
													<select name="type" class="form-control" id="type">
														<option value="1">小故事</option>
														<option value="2">java</option>
														<option value="3">个人剪影</option>
														<option value="4">小作文</option>
														<option value="5">其他</option>
													</select>
												</div>
											</div>

											<div class="form-group col-md-12" id="quoteLink">
												<label for="quoteLink">状态</label>
												<div>
													<label class="lyear-radio radio-inline radio-primary">
														<input type="radio" name="quoteLink" value="me"
															onchange="t1(this)" checked><span>原创</span>
													</label>
													<label class="lyear-radio radio-inline radio-primary">
														<input type="radio" name="quoteLink" value="notMe"
															onchange="t2(this)"><span>转载</span>
													</label>
													<input id="quoteLinkText" name="quoteLinkText" type="text"
														placeholder="请输入引用链接"
														style="height: 30px;width: 250px;display: none"
														class="form-control" />
												</div>
											</div>

											<div class="form-group col-md-12">
												<label for="content">文章内容(内容过多建议打开全屏修改)</label>
												<div class="page-right" style="display: flex;">
													<!-- 编辑器 DOM -->
													<div style="border: 1px solid #ccc; flex: 1" id="editor-wrapper">
														<div id="editor-toolbar" style="border-bottom: 1px solid #ccc;">
														</div>
														<div id="editor-text-area" style="height: 350px"></div>
														<textarea id="editor-content-textarea" style="display: none"
															name="articleContent" readonly></textarea>
													</div>
													<!-- 标题目录 -->
													<div style="width: 200px; background-color: #f1f1f1;">
														<ul id="header-container"></ul>
													</div>
												</div>
											</div>
											<div class="form-group col-md-12">
												<button type="submit" class="btn btn-primary ajax-post"
													target-form="add-form">保存修改</button>
												<button type="button" class="btn btn-default"
													onclick="javascript:history.back(-1);return false;">返 回</button>
											</div>
										</form>
									</div>
								</div>
							</div>

						</div>

					</div>

				</main>
				<!--End 页面主要内容-->
			</div>
		</div>

		<script type="text/javascript" src="js/jquery.min.js"></script>
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<script type="text/javascript" src="js/perfect-scrollbar.min.js"></script>
		<!--标签插件-->
		<script src="js/jquery-tags-input/jquery.tagsinput.min.js"></script>
		<script type="text/javascript" src="js/main.min.js"></script>
		<!-- 引入 css -->
		<link href="https://unpkg.com/@wangeditor/editor@latest/dist/css/style.css" rel="stylesheet">

		<!-- 引入 js -->
		<script src="https://unpkg.com/@wangeditor/editor@latest/dist/index.js"></script>
		<script type="text/javascript">
			function addImage() {
				$("#headImage").click();
			}
			//选择文件完毕的回调
			function addHeadImage(obj) {
				const file = obj.files[0];
				console.log(file);
				var reader = new FileReader();
				reader.readAsDataURL(file);
				reader.onload = function() {
					$("#image").attr("src", this.result);
				}
			}
		</script>
		<!--控制引用链接输入框-->
		<script type="text/javascript">
			function t1(obj) {
				let val = $("input[name='quoteLink']:checked").val();
				if (val === "me") {
					$("#quoteLinkText").css('display', 'none');
				}
			}

			function t2(obj) {
				let val = $("input[name='quoteLink']:checked").val();
				if (val === "notMe") {
					$("#quoteLinkText").css('display', 'inline');
				}
			}
		</script>
		<!-- WangEdit的设置 -->
		<script>
			const E = window.wangEditor
			// 标题 DOM 容器
			const headerContainer = document.getElementById('header-container')
			headerContainer.addEventListener('mousedown', event => {
				if (event.target.tagName !== 'LI') return
				event.preventDefault()
				const id = event.target.id
				editor.scrollToElem(id) // 滚动到标题
			})
			window.editor = E.createEditor({
				selector: '#editor-text-area',
				config: {
					placeholder: '请输入文章内容...',
					MENU_CONF: {
						uploadImage: {
							base64LimitSize: 10 * 1024 * 1024 // 10M 以下插入 base64
						}
					},
					onChange(editor) {
						document.getElementById('editor-content-textarea').value = editor.getHtml();
						const headers = editor.getElemsByTypePrefix('header')
						headerContainer.innerHTML = headers.map(header => {
							const text = E.SlateNode.string(header)
							const {
								id,
								type
							} = header
							return `<li id="${id}" type="${type}">${text}</li>`
						}).join('')
					}
				}
			})
			window.toolbar = E.createToolbar({
				editor,
				selector: '#editor-toolbar',
				config: {}
			})
		</script>
		<!--提交表单时的数据校验-->
		<!-- <script>
		   function checkForm() {
		       /*获取title*/
		       const title = fucking('title').value;
		       if(CheckNull(title)){
		           fucking('validate').innerHTML = 'title不能为空';
		           return;
		       }
		       fucking('validate').innerHTML = '';
		       /*获取createBy*/
		       const createBy = fucking('createBy').value;
		       if(CheckNull(createBy)){
		           fucking('validate').innerHTML = 'createBy不能为空';
		           return;
		       }
		       fucking('validate').innerHTML = '';
		       /*获取summary*/
		       const summary = fucking('summary').value;
		       if(CheckNull(summary)){
		           fucking('validate').innerHTML = 'summary不能为空';
		           return;
		       }
		       fucking('validate').innerHTML = '';
		       /*获取articleContent*/
		       const articleContent = fucking('editor-content-textarea').value;
		       if(articleContent === '<p><br></p>'){
		           fucking('validate').innerHTML = 'articleContent不能为空';
		           return;
		       }
		       fucking('validate').innerHTML = '';
		       /*提交表单*/
		       fucking('myForm').submit();
		   }
		
		//将判断输入内容不为空封装为一个函数
		   function CheckNull(str) {
		       return str == null || str.trim() === "";
		   }
		//将document.getElementById方法进行封装
		   function fucking(id) {
		       return document.getElementById(id);
		   }
		</script> -->

	</body>
</html>
